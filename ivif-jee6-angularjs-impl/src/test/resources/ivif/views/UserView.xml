<?xml version="1.0" encoding="utf-8"?>
<views xmlns="http://www.iorga.com/xml/ns/ivif-views"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.iorga.com/xml/ns/ivif-views">

    <grid name="UserGrid" title="Users" entity="User" on-open="openProfileGridFromUser({profileId: $line.profile.id})">
        <column ref="name"/>
        <column ref="profile.id"/>
    </grid>

    <grid name="EditableUserGrid" title="Users" entity="User" on-open="openProfileGridFromUser({profileId: $line.profile.id})" editable="true">
        <column ref="firstName"/>
        <column ref="name" editable="true"/>
    </grid>

    <grid name="ToolbarUserGrid" entity="User" selection="single">
        <toolbar>
            <button title="Open profile" action="openProfileGridFromUser({profileId: $line.profile.id})"/>
            <button title="Open computer" action="openComputerGridFromUser({userId: $line.id})"/>
        </toolbar>
        <column ref="name"/>
    </grid>

    <form name="UserForm" title="User" entity="User">
        <field ref="name"/>
    </form>

    <action-open-view name="openProfileGridFromUser" grid-name="ProfileGrid">
        <query>
            <where>$record.id = :profileId</where>
        </query>
    </action-open-view>

    <action-open-view name="openComputerGridFromUser" grid-name="ComputerGrid">
        <query>
            <where>$record.user.id = :userid</where>
        </query>
    </action-open-view>
</views>