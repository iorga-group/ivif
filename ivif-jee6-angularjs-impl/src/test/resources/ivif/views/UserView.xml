<?xml version="1.0" encoding="utf-8"?>
<views xmlns="http://www.iorga.com/xml/ns/ivif-views"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.iorga.com/xml/ns/ivif-views">

    <grid name="UserGrid" title="Users" entity="User" on-open="openProfileGridFromUser({profileId: $line.profile.id})">
        <column ref="name"/>
        <column ref="profile.id"/>
    </grid>

    <grid name="EditableUserGrid" title="Users" entity="User" on-open="openProfileGridFromUser({profileId: $line.profile.id})" editable="true" roles-allowed="admin manager">
        <column ref="firstName"/>
        <column ref="name" editable-if="$record.profile.name === 'editableName'"/>
        <column ref="status" editable="true"/>
        <code><![CDATA[
            <td data-title="'Profile description'">
                Desc : {{$line.profile.description}}
            </td>
        ]]></code>
        <column ref="enabled" editable="true"/>
    </grid>

    <grid name="ToolbarUserGrid" entity="User" selection="single" on-select="$inject(aService)($line.id); $inject(anotherService)($line.profile.name);">
        <toolbar>
            <button title="Open profile" action="openProfileGridFromUser({profileId: $line.profile.id})"/>
            <button title="Open computer" action="openComputerGridFromUser({userId: $line.id})"/>
        </toolbar>
        <column ref="name"/>
    </grid>

    <grid name="SelectEditableAndButtonUserGrid" entity="User" selection="single" on-select="$inject(aService)($line.id)" editable="true">
        <toolbar>
            <button title="Test service" action="$inject(aService2)($line.id)" disabled-if="$record.name === 'test'"/>
        </toolbar>
        <highlight color-class="warning" if="$line.profile.name === 'admin'"/>
        <column ref="name"/>
        <column ref="id"/>
    </grid>

    <action-open-view name="openProfileGridFromUser" grid-name="ProfileGrid" roles-allowed="admin">
        <query>
            <where>$record.id = :profileId</where>
        </query>
    </action-open-view>

    <action-open-view name="openComputerGridFromUser" grid-name="ComputerGrid">
        <query>
            <where>$record.user.id = :userid</where>
        </query>
    </action-open-view>
</views>